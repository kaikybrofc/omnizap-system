# ==============================
# OmniZap - Ambiente base
# ==============================

# Configuracoes gerais do bot
COMMAND_PREFIX="#"
COMMAND_REACT_EMOJI=ðŸ¤–
USER_ADMIN=seu_jid_de_admin@s.whatsapp.net
IMAGE_MENU=https://example.com/assets/omnizap-banner.png
PM2_APP_NAME=omnizap-system
NODE_ENV=development
LOG_LEVEL=info
ECOSYSTEM_NAME=omnizap
BAILEYS_VERSION=

# Perfil de usuario / social
USER_PROFILE_ACTIVE_DAYS=30
USER_PROFILE_SOCIAL_DAYS=45

# Captcha
CAPTCHA_OK_EMOJI=âœ…

# ==============================
# Banco de dados (MySQL)
# ==============================
DB_HOST=localhost
DB_USER=user1
DB_PASSWORD=1234
DB_NAME=omnizap
DB_POOL_LIMIT=10

# Fila de escrita em banco
DB_WRITE_FLUSH_MS=1500
DB_MESSAGE_BATCH_SIZE=200
DB_CHAT_BATCH_SIZE=200
DB_CHAT_COOLDOWN_MS=45000
DB_MESSAGE_QUEUE_MAX=5000

# Monitor de banco (logs/slow queries)
# DB_MONITOR_ENABLED: por padrao e true em dev e false em production
DB_MONITOR_ENABLED=true
DB_SLOW_QUERY_MS=250
DB_LOG_EVERY_QUERY=false
DB_STATS_TOP_N=10
DB_STATS_SAMPLE_SIZE=2000
DB_SLOW_EXPLAIN=false
DB_MONITOR_LOG_PATH=./logs/db-monitor.log
DB_MONITOR_LOG_ROTATE_MB=20
DB_MONITOR_LOG_KEEP=5
DB_MONITOR_SNAPSHOT_EVERY_MS=0

# Alertas de query (ms), separados por virgula
DB_QUERY_ALERT_THRESHOLDS=500,1000

# ==============================
# LID/JID
# ==============================
LID_BACKFILL_ON_START=true
LID_BACKFILL_BATCH=50000

# ==============================
# Observabilidade do app (metrics endpoint interno)
# ==============================
METRICS_ENABLED=true
METRICS_HOST=0.0.0.0
METRICS_PORT=9102
METRICS_PATH=/metrics
METRICS_SERVICE_NAME=omnizap
# Override opcional para comando de ping (se vazio, usa METRICS_HOST/PORT/PATH)
METRICS_ENDPOINT=
METRICS_PING_TIMEOUT_MS=1500

# Telemetria extra do comando social (0=off, 1=on)
OMNIZAP_SOCIAL_METRICS=0

# ==============================
# Noticias
# ==============================
NEWS_API_URL=http://127.0.0.1:3001
NEWS_SENT_IDS_LIMIT=500

# ==============================
# OpenAI
# ==============================
OPENAI_API_KEY=
OPENAI_MODEL=gpt-5-nano
OPENAI_IMAGE_MODEL=gpt-5-nano
OPENAI_SYSTEM_PROMPT=
OPENAI_SESSION_TTL_SECONDS=21600
OPENAI_TIMEOUT_MS=30000
OPENAI_IMAGE_TIMEOUT_MS=120000
OPENAI_MAX_RETRIES=2
OPENAI_RETRY_BASE_MS=500
OPENAI_RETRY_MAX_MS=4000
OPENAI_MAX_IMAGE_MB=50
OPENAI_TTS_MODEL=gpt-4o-mini-tts
OPENAI_TTS_VOICE=alloy
OPENAI_TTS_FORMAT=mp3
OPENAI_TTS_PTT=false
OPENAI_TTS_MAX_CHARS=4096

# ==============================
# Quote
# ==============================
QUOTE_BG_COLOR="#144d37"
QUOTE_NAME_COLOR="#facc01"
QUOTE_TEXT_COLOR="#e8eef6"
QUOTE_TIMEOUT_MS=10000
QUOTE_EMOJI_TIMEOUT_MS=4000
QUOTE_EMOJI_BASE_URL=https://raw.githubusercontent.com/googlefonts/noto-emoji/main/png/128
QUOTE_FONT_FAMILY="Noto Sans,Segoe UI,Arial,Noto Color Emoji,Apple Color Emoji,Segoe UI Emoji,sans-serif"

# Legado (atualmente nao usado no codigo principal)
QUOTE_API_URL=https://bot.lyo.su/quote/generate.png

# ==============================
# Waifu
# ==============================
WAIFU_PICS_BASE=https://api.waifu.pics
WAIFU_PICS_TIMEOUT_MS=15000
WAIFU_PICS_ALLOW_NSFW=false

# Legado (atualmente nao usado no codigo principal)
WAIFU_API_TOKEN=
WAIFU_API_BASE=https://waifu.it/api/v4
WAIFU_TIMEOUT_MS=15000

# ==============================
# PokeAPI
# ==============================
POKEAPI_CACHE_TTL_MS=21600000
POKEAPI_TIMEOUT_MS=10000
POKEAPI_RETRY_ATTEMPTS=2
POKEAPI_RETRY_BASE_DELAY_MS=350
POKEAPI_DNS_FAMILY=4
POKEAPI_USER_AGENT=omnizap-system/2.1 (+https://github.com/Kaikygr/omnizap-system)
POKEAPI_LORE_LANGS=pt-br,pt,en

# ==============================
# Midia (play / yt-dlp API)
# ==============================
YTDLS_BASE_URL=http://127.0.0.1:3000
YT_DLS_BASE_URL=
PLAY_API_TIMEOUT_MS=900000
PLAY_API_DOWNLOAD_TIMEOUT_MS=1800000
PLAY_QUEUE_STATUS_TIMEOUT_MS=8000
PLAY_MAX_MB=100
PLAY_VIDEO_PROCESS_TIMEOUT_MS=420000
PLAY_VIDEO_FORCE_TRANSCODE=true

# TikTok
TIKTOK_EXTRACT_BASE_URL=http://127.0.0.1:8000
TIKTOK_EXTRACT_PATH=/extract
TIKTOK_EXTRACT_TIMEOUT_SECONDS=60
TIKTOK_HTTP_TIMEOUT_MS=120000
TIKTOK_MAX_MB=80
TIKTOK_MAX_URLS_PER_COMMAND=5
TIKTOK_MAX_IMAGES_PER_POST=10

# FFmpeg / debug
FFMPEG_PATH=ffmpeg
FFPROBE_PATH=ffprobe
DEBUG_FFMPEG=false

# ==============================
# RPG Pokemon
# ==============================
RPG_BATTLE_TTL_MS=300000
RPG_STARTER_LEVEL=5
RPG_POTION_HEAL_HP=25
RPG_SUPER_POTION_HEAL_HP=60
RPG_SHOP_REFRESH_MS=3600000
RPG_SHOP_ITEMS_PER_POCKET=6
RPG_POKEDEX_TOTAL=1025
RPG_DEFAULT_REGION=kanto
RPG_SESSION_IDLE_MS=600000
RPG_RAID_TTL_MS=1200000
RPG_PVP_TTL_MS=900000
RPG_PVP_COOLDOWN_MS=30000
RPG_PVP_QUEUE_TTL_MS=600000
RPG_PVP_WIN_GOLD=220
RPG_PVP_WIN_PLAYER_XP=140
RPG_PVP_WIN_POKEMON_XP=120
RPG_PVP_WIN_POINTS=3
RPG_PVP_LOSS_POINTS=1
RPG_STARTER_GOLD=450
RPG_STARTER_POKEBALL_QTY=4
RPG_STARTER_POTION_QTY=3
RPG_SHOP_COST_FACTOR=0.22
RPG_SHOP_COST_MIN=28
RPG_ECONOMY_RESCUE_COOLDOWN_MS=21600000
RPG_ECONOMY_RESCUE_MAX_GOLD=60
RPG_ECONOMY_RESCUE_GOLD=90
RPG_ECONOMY_RESCUE_POTION_QTY=1
RPG_TRADE_TTL_MS=1200000
RPG_COOP_CAPTURE_TARGET=25
RPG_COOP_RAID_TARGET=8
RPG_COOP_REWARD_GOLD=220
RPG_COOP_REWARD_XP=160
RPG_COOP_REWARD_ITEM_KEY=pokeball
RPG_COOP_REWARD_ITEM_QTY=2
RPG_KARMA_BONUS_THRESHOLD=20
RPG_KARMA_BONUS_RATE=0.08
RPG_SOCIAL_XP_CONVERSION_RATE=0.25
RPG_SOCIAL_XP_ACTION_CAP=45
RPG_SOCIAL_XP_DAILY_CONVERSION_CAP=300
RPG_SOCIAL_XP_PLAYER_SHARE=0.6
RPG_SOCIAL_XP_KARMA_BOOST_RATE=0.08
RPG_SOCIAL_XP_GROUP_BOOST_RATE=0.05
RPG_SOCIAL_XP_ABUSE_PENALTY_RATE=0.12
RPG_SOCIAL_XP_ABUSE_CAP_HITS_THRESHOLD=3

# Eventos semanais
RPG_EVENT_CAPTURE_TARGET=40
RPG_EVENT_CAPTURE_REWARD_GOLD=160
RPG_EVENT_CAPTURE_REWARD_XP=120
RPG_EVENT_PVP_TARGET=14
RPG_EVENT_PVP_REWARD_GOLD=220
RPG_EVENT_PVP_REWARD_XP=150
RPG_EVENT_RAID_DAMAGE_TARGET=4500
RPG_EVENT_RAID_REWARD_GOLD=210
RPG_EVENT_RAID_REWARD_XP=145

# Spawn / batalha
RPG_WILD_MAX_POKE_ID=1025
RPG_MOVE_SAMPLE_LIMIT=24
RPG_SHINY_CHANCE=0.01
RPG_BIOME_LOOKUP_ATTEMPTS=6
RPG_SPECIES_FILTER_ATTEMPTS=5
RPG_LEGENDARY_SPAWN_CHANCE=0.06
RPG_MYTHICAL_SPAWN_CHANCE=0.03
RPG_BATTLE_DAMAGE_SCALE=0.68
RPG_BATTLE_DAMAGE_MAX_HP_RATIO=0.5
RPG_BATTLE_DAMAGE_SUPER_EFFECTIVE_BONUS_RATIO=0.2
RPG_BATTLE_DAMAGE_ULTRA_EFFECTIVE_BONUS_RATIO=0.25

# Renderizacao canvas (batalha/perfil)
RPG_BATTLE_CANVAS_ENABLED=true
RPG_PROFILE_CANVAS_ENABLED=true
RPG_BATTLE_CANVAS_CACHE_TTL_MS=600000
RPG_BATTLE_CANVAS_CACHE_LIMIT=120
RPG_BATTLE_CANVAS_TIMEOUT_MS=7000
RPG_PROFILE_CANVAS_TIMEOUT_MS=6000
RPG_PROFILE_CANVAS_CACHE_TTL_MS=600000
RPG_PROFILE_CANVAS_CACHE_LIMIT=80

# ==============================
# Sticker packs
# ==============================
STICKER_STORAGE_DIR=./data/stickers
STICKER_PACK_MAX_ITEMS=30
STICKER_PACK_MAX_PACKS_PER_OWNER=50
STICKER_PACK_MAX_STICKER_BYTES=2097152
STICKER_PACK_LAST_CACHE_TTL_MS=21600000
STICKER_PACK_RATE_MAX_ACTIONS=20
STICKER_PACK_RATE_WINDOW_MS=60000
STICKER_PACK_PREVIEW_LINES=20
STICKER_PACK_FALLBACK_SEND_LIMIT=30
STICKER_PACK_ZIP_ENABLED=false
STICKER_PACK_AUTO_COLLECT_ENABLED=true
STICKER_PACK_AUTO_COLLECT_NOTIFY=true
STICKER_DEFAULT_PACK_NAME=https://omnizap.shop/
STICKER_PACK_AUTO_PACK_NAME=minhasfigurinhas
STICKER_PACK_AUTO_PACK_VISIBILITY=private
CLIP_CLASSIFIER_ENABLED=true
CLIP_CLASSIFIER_API_URL=http://127.0.0.1:8008/classify
CLIP_CLASSIFIER_TIMEOUT_MS=3000
CLIP_CLASSIFIER_PROVIDER=clip
CLIP_CLASSIFIER_CLASSIFICATION_VERSION=v1
CLIP_CLASSIFIER_NSFW_THRESHOLD=0.6
CLIP_DEFAULT_LABELS_JSON=
CLIP_DEFAULT_LABELS_PATH=
CLIP_MAX_LABELS=256
STICKER_CLASSIFICATION_TAG_MIN_SCORE=0.2
PACK_CLASSIFICATION_TAG_MIN_SCORE=0.18
CLASSIFICATION_MAX_TAGS=6
STICKER_CLASSIFICATION_BACKGROUND_ENABLED=true
STICKER_CLASSIFICATION_BACKGROUND_STARTUP_DELAY_MS=15000
STICKER_CLASSIFICATION_BACKGROUND_INTERVAL_MS=120000
STICKER_CLASSIFICATION_BACKGROUND_CONCURRENCY=2
STICKER_CLASSIFICATION_BACKGROUND_BATCH_SIZE=30
STICKER_AUTO_PACK_BY_TAGS_ENABLED=true
STICKER_AUTO_PACK_BY_TAGS_STARTUP_DELAY_MS=20000
STICKER_AUTO_PACK_BY_TAGS_INTERVAL_MS=180000
STICKER_AUTO_PACK_BY_TAGS_TARGET_SIZE=30
STICKER_AUTO_PACK_BY_TAGS_MIN_GROUP_SIZE=8
STICKER_AUTO_PACK_BY_TAGS_MAX_GROUPS=12
STICKER_AUTO_PACK_BY_TAGS_MAX_SCAN_ASSETS=5000
STICKER_AUTO_PACK_BY_TAGS_MAX_ADDITIONS_PER_CYCLE=300
STICKER_AUTO_PACK_BY_TAGS_MAX_REMOVALS_PER_CYCLE=120
STICKER_AUTO_PACK_BY_TAGS_TOP_TAGS_PER_ASSET=3
STICKER_AUTO_PACK_BY_TAGS_NSFW_THRESHOLD=0.7
STICKER_AUTO_PACK_BY_TAGS_NSFW_SUGGESTIVE_THRESHOLD=0.4
STICKER_AUTO_PACK_BY_TAGS_NSFW_EXPLICIT_THRESHOLD=0.78
STICKER_AUTO_PACK_BY_TAGS_MIN_ASSET_EDGE=192
STICKER_AUTO_PACK_BY_TAGS_MIN_ASSET_AREA=36864
STICKER_AUTO_PACK_BY_TAGS_MIN_ASSET_BYTES=6144
STICKER_AUTO_PACK_BY_TAGS_MAX_BLURRY_SCORE=0.82
STICKER_AUTO_PACK_BY_TAGS_MAX_LOW_QUALITY_SCORE=0.82
STICKER_AUTO_PACK_BY_TAGS_DEDUPE_SIMILARITY_THRESHOLD=0.985
STICKER_AUTO_PACK_BY_TAGS_REBUILD_ENABLED=true
STICKER_AUTO_PACK_BY_TAGS_VISIBILITY=public
STICKER_AUTO_PACK_BY_TAGS_PUBLISHER=OmniZap Auto
STICKER_CREATOR_VERIFIED_PUBLISHERS=omnizap,omnizap auto

# Catalogo web de packs
STICKER_CATALOG_ENABLED=true
STICKER_WEB_PATH=/stickers
STICKER_API_BASE_PATH=/api/sticker-packs
STICKER_WEB_LIST_LIMIT=24
STICKER_WEB_LIST_MAX_LIMIT=60
STICKER_ORPHAN_LIST_LIMIT=120
STICKER_ORPHAN_LIST_MAX_LIMIT=300
STICKER_WEB_ASSET_CACHE_SECONDS=600
STICKER_CATALOG_ONLY_CLASSIFIED=true
STICKER_DATA_PUBLIC_PATH=/data
STICKER_DATA_PUBLIC_DIR=./data
STICKER_DATA_LIST_LIMIT=50
STICKER_DATA_LIST_MAX_LIMIT=200
STICKER_DATA_SCAN_MAX_FILES=10000

# Paths locais (legado/uso auxiliar)
STORE_PATH=./temp

# ==============================
# Observabilidade via docker-compose
# ==============================
STACK_NAME=omnizap

# Prometheus
PROMETHEUS_IMAGE_TAG=v2.52.0
PROMETHEUS_RETENTION_TIME=15d
PROMETHEUS_RETENTION_SIZE=20GB
PROMETHEUS_CONFIG_PATH=./observability/prometheus.yml
PROMETHEUS_ALERT_RULES_PATH=./observability/alert-rules.yml
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_IMAGE_TAG=10.4.3
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_ROOT_URL=%(protocol)s://%(domain)s:%(http_port)s/
GRAFANA_TIMEZONE=America/Boa_Vista
GRAFANA_PROVISIONING_PATH=./observability/grafana/provisioning
GRAFANA_DASHBOARDS_PATH=./observability/grafana/dashboards
GRAFANA_PORT=3003

# Loki
LOKI_IMAGE_TAG=2.9.4
LOKI_CONFIG_PATH=./observability/loki-config.yml
LOKI_PORT=3100

# Promtail
PROMTAIL_IMAGE_TAG=2.9.4
PROMTAIL_CONFIG_PATH=./observability/promtail-config.yml
APP_LOGS_PATH=./logs
MYSQL_LOGS_PATH=/var/lib/mysql
PROMTAIL_PORT=9080

# MySQL Exporter
MYSQL_EXPORTER_IMAGE_TAG=v0.15.1
MYSQL_EXPORTER_DSN=exporter:exporter@(host.docker.internal:3306)/
MYSQL_EXPORTER_CNF_PATH=./observability/mysql-exporter.cnf
MYSQL_EXPORTER_PORT=9104

# Node Exporter
NODE_EXPORTER_IMAGE_TAG=v1.7.0
NODE_EXPORTER_PORT=9100
